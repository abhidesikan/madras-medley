<div class="post-header">
	{{- /* Extract thumbnail image - check featured_image first, then first image in content */ -}}
	{{- $hasImage := false -}}
	{{- $imageSrc := "" -}}
	{{- if .Params.featured_image -}}
		{{- $hasImage = true -}}
		{{- $imageSrc = .Params.featured_image -}}
	{{- else -}}
		{{- $images := findRE "<img[^>]+src=\"([^\"]+)\"" .Content 1 -}}
		{{- if $images -}}
			{{- $hasImage = true -}}
			{{- $img := index $images 0 -}}
			{{- $imageSrc = replaceRE ".*src=\"([^\"]+)\".*" "$1" $img -}}
		{{- end -}}
	{{- end -}}

	<div class="matter" style="display: flex; align-items: flex-start; gap: 1.2em;">
		{{- if $hasImage -}}
		<div class="post-thumbnail" style="flex-shrink: 0;">
			<a href="{{ .RelPermalink }}">
				<img src="{{ $imageSrc }}" alt="{{ .Title }}" style="width: 80px; height: auto; border-radius: 4px; margin: 0;">
			</a>
		</div>
		{{- end -}}

		<div style="flex: 1; min-width: 0;">
			<h4 class="title small">
				<a href="{{ .RelPermalink }}">{{.Title}}{{ if .Draft }}<sup class="draft-label">DRAFT</sup>{{ end }}</a>
			</h4>
			<div style="color: #999; font-size: 0.85rem; display: flex; gap: 0.8em; margin-top: 0.2em; flex-wrap: wrap; align-items: center;">
				<span>{{ dateFormat "Jan 2, 2006" .Date }}</span>
				<span>·</span>
				<span>{{ math.Round (div (countwords .Content) 200.0) }} min read</span>
				{{- if .Params.tags -}}
					<span>·</span>
					<div style="display: flex; gap: 0.4em; flex-wrap: wrap;">
						{{- range first 3 .Params.tags -}}
						<a href="{{ "/tags/" | relLangURL }}{{ . | urlize }}" class="tag-preview" style="display: inline-block; padding: 0.2em 0.5em; border-radius: 2px; font-size: 0.8em; text-decoration: none;">
							{{ . }}
						</a>
						{{- end -}}
					</div>
				{{- end -}}
			</div>
		</div>
	</div>
</div>
